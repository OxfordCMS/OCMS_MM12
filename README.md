
# OCMS_MM12

This is a repository for pipelines and scripts that relate to the analysis of the oligoMM12 or variants of gnotobiotic communties.


## Scripts

### mm12_gene_abundance.py

#### Purpose

The purpose of this script is to estimate the abundance of genes in an MM12 community given a set of relative abundance estimates for each MM12 member.

#### Inputs

The first input is a tab separated file that has relative abundance estimates for a set of samples. Rows
are strains and columns are samples::

   +------------+------------+------------+------------+------------+
   | strain     | sample1    | sample2    | sample3    | sample4    |
   +------------+------------+------------+------------+------------+
   | KB1        | 0.33       | 0.20       | 0.80       | 0.70       |
   +------------+------------+------------+------------+------------+
   | YL32       | 0.33       | 0.80       | 0.00       | 0.15       |
   +------------+------------+------------+------------+------------+
   | I46        | 0.33       | 0.00       | 0.20       | 0.15       |
   +------------+------------+------------+------------+------------+


The second input is a directory that contains a file for each strain that contains annotations. Each
annotation file has the form::

  +---------------+-------+------------+-------+-------------+-----------+-------------------------------------+
  |  locus_tag    | ftype |  length_bp | gene  |  EC_number  | COG       |   product                           |         
  +---------------+-------+------------+-------+-------------+-----------+-------------------------------------+ 
  | LHNLDECA_00001| CDS   | 1368       | alr   |  5.1.1.1    | COG0787   |  Alanine racemase                   |
  +---------------+-------+------------+-------+-------------+-----------+-------------------------------------+
  | LHNLDECA_00002| CDS   | 525        |       |             |           |  hypothetical protein               |
  +---------------+-------+------------+-------+-------------+-----------+-------------------------------------+
  | LHNLDECA_00003| CDS   | 501        | luxS  |  4.4.1.21   | COG1854   |  S-ribosylhomocysteine lyase        |
  +---------------+-------+------------+-------+-------------+-----------+-------------------------------------+
  | LHNLDECA_00004| CDS   | 1080       | hcxA  |  1.1.1.-    | COG0371   |  Hydroxycarboxylate dehydrogenase A |
  +---------------+-------+------------+-------+-------------+-----------+-------------------------------------+


This is an annotation file that is generated by prokka. The name of each file must have a corresponding entry in the relative abundance for table. In the example above there should be a KB1.tsv, YL32.tsv and I46.tsv file in the specified annotations directory.


#### Usage

Example

```
python mm12_gene_abundance.py --relab=rel_abundance.tsv --annotations-dir=anotations --annotation-type=gene --log=gene_abundance.tsv
```

Type

```
python mm12_gene_abundance.py --help
```

for command line help.

#### Outputs

The output of the script is a table that has each gene as a row and each sample as a column. The values are the relativeabundance of each gene in each sample. The relationship between the strain that each gene has come from is not retained in the output file.

